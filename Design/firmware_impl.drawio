<mxfile host="Electron" modified="2025-12-15T02:45:00.000Z" agent="5.0" version="21.6.8" type="device">
  <diagram id="Fw-Impl" name="Firmware Logic">
    <mxGraphModel dx="1000" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <mxCell id="start" value="Power On (main.py)" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="init" value="Init RobotArm &amp; WiFi" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="140" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge_1" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="start" target="init">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="loop" value="Loop (100Hz)" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="240" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge_2" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="init" target="loop">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- UDP Branch -->
        <mxCell id="udp_recv" value="Rx UDP Packet?" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;" vertex="1" parent="1">
          <mxGeometry x="160" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge_3" value="Check" style="endArrow=classic;html=1;exitX=0;exitY=0.5;" edge="1" parent="1" source="loop" target="udp_recv">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="parse_cmd" value="Parse CMD ID" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="420" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="edge_4" value="Yes" style="endArrow=classic;html=1;" edge="1" parent="1" source="udp_recv" target="parse_cmd">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="cmd_01" value="CMD 01: Move XYZ" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="540" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="cmd_03" value="CMD 03: Angles" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="170" y="540" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="edge_5" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="parse_cmd" target="cmd_01">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge_6" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="parse_cmd" target="cmd_03">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Motion Update Branch -->
        <mxCell id="update" value="robot.update()" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;" vertex="1" parent="1">
          <mxGeometry x="480" y="320" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="edge_7" value="Every Tick" style="endArrow=classic;html=1;exitX=1;exitY=0.5;" edge="1" parent="1" source="loop" target="update">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="profiler" value="Trapezoidal Profiler&#xa;(Calculate Next Step)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="420" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="edge_8" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="update" target="profiler">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="coupling" value="Mk1 Coupling&#xa;q3 = q3 + (q2-90)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="480" y="500" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="edge_9" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="profiler" target="coupling">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="servo" value="Set PWM Duty" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="580" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="edge_10" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="coupling" target="servo">
           <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
