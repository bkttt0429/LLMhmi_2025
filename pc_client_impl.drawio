<mxfile host="Electron" modified="2025-12-11T13:30:00.000Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.8 Chrome/114.0.5735.289 Electron/25.5.0 Safari/537.36" etag="PC_Client_Impl" version="21.6.8" type="device">
  <diagram id="PC-Client-Impl" name="PC Client Implementation">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Swimlane: Main Process -->
        <mxCell id="lane_main" value="Main Process (web_server.py)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="300" height="500" as="geometry" />
        </mxCell>
        <mxCell id="node_start" value="(11) Start" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="lane_main">
          <mxGeometry x="110" y="40" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="node_init_flask" value="(12) Init Flask &amp; SocketIO" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="lane_main">
          <mxGeometry x="80" y="110" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node_spawn_vid" value="(13) Spawn VideoProcess&#xa;(Multiprocessing)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="lane_main">
          <mxGeometry x="80" y="190" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node_route_idx" value="(14) Route /&#xa;(Serve index.html)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="lane_main">
          <mxGeometry x="40" y="280" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node_route_vid" value="(15) Route /video_feed&#xa;(Stream Generator)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="lane_main">
          <mxGeometry x="170" y="280" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node_sio_event" value="(16) SocketIO Event&#xa;'control_cmd'" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="lane_main">
          <mxGeometry x="80" y="380" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node_http_req" value="(17) Send HTTP GET&#xa;to ESP12F" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="lane_main">
          <mxGeometry x="80" y="450" width="140" height="40" as="geometry" />
        </mxCell>

        <!-- Swimlane: Video Process -->
        <mxCell id="lane_video" value="Video Process (video_process.py)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="380" y="40" width="300" height="500" as="geometry" />
        </mxCell>
        <mxCell id="node_vid_loop" value="(18) Loop: Read Frame&#xa;(from ESP32)" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="lane_video">
          <mxGeometry x="80" y="60" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="node_ai_check" value="(19) AI Enabled?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="lane_video">
          <mxGeometry x="100" y="180" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="node_yolo_infer" value="(20) YOLO Inference&#xa;(ai_detector.py)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="lane_video">
          <mxGeometry x="20" y="280" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="node_draw_box" value="(21) Draw BBox" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="lane_video">
          <mxGeometry x="20" y="350" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="node_encode" value="(22) Encode JPEG" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="lane_video">
          <mxGeometry x="80" y="440" width="140" height="40" as="geometry" />
        </mxCell>

        <!-- Edges -->
        <mxCell id="e1" edge="1" parent="1" source="node_start" target="node_init_flask" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;"> <mxGeometry relative="1" as="geometry" /> </mxCell>
        <mxCell id="e2" edge="1" parent="1" source="node_init_flask" target="node_spawn_vid" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;"> <mxGeometry relative="1" as="geometry" /> </mxCell>
        <mxCell id="e3" edge="1" parent="1" source="node_spawn_vid" target="node_vid_loop" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;dashed=1;" value="Spawn IPC"> <mxGeometry relative="1" as="geometry" /> </mxCell>
        
        <mxCell id="e4" edge="1" parent="lane_video" source="node_vid_loop" target="node_ai_check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;"> <mxGeometry relative="1" as="geometry" /> </mxCell>
        <mxCell id="e5" edge="1" parent="lane_video" source="node_ai_check" target="node_yolo_infer" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" value="Yes"> <mxGeometry relative="1" as="geometry" /> </mxCell>
        <mxCell id="e6" edge="1" parent="lane_video" source="node_yolo_infer" target="node_draw_box" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;"> <mxGeometry relative="1" as="geometry" /> </mxCell>
        <mxCell id="e7" edge="1" parent="lane_video" source="node_draw_box" target="node_encode" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;"> <mxGeometry relative="1" as="geometry" /> </mxCell>
        <mxCell id="e8" edge="1" parent="lane_video" source="node_ai_check" target="node_encode" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" value="No"> 
           <mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="240" y="210"/><mxPoint x="240" y="460"/></Array></mxGeometry> 
        </mxCell>

        <mxCell id="e9" edge="1" parent="1" source="node_encode" target="node_route_vid" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" value="Queue Frame"> <mxGeometry relative="1" as="geometry" /> </mxCell>
        <mxCell id="e_sio" edge="1" parent="lane_main" source="node_sio_event" target="node_http_req" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;"> <mxGeometry relative="1" as="geometry" /> </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
